(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0e8af122"],{cda8:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{style:t.status?null:"opacity: 0.3;"},[a("div",{staticStyle:{display:"inline-block"}},[a("div",{staticStyle:{color:"#333333","font-size":"14px","margin-bottom":"5px"}},[a("ellipsis",{attrs:{length:20,tooltip:""}},[t._v(t._s(t.name))])],1),a("div",{staticStyle:{color:"#999999","font-size":"12px"}},[0===t.type?a("span",[t._v("Banner")]):t._e(),1===t.type?a("span",[t._v("Native")]):t._e(),2===t.type?a("span",[t._v("Rewarded Video")]):t._e(),3===t.type?a("span",[t._v("Interstitial")]):t._e(),a("a-divider",{attrs:{type:"vertical"}}),a("span",{staticStyle:{"margin-left":"-2px"}},[t._v(t._s(t.id))])],1)])])},s=[],r=(a("a9e3"),a("2af9")),i={name:"OmPlacementInfo",props:{id:{type:Number,required:!1,default:0},name:{type:String,required:!0,default:""},type:{type:Number,required:!1,default:0},status:{type:Number,required:!1,default:1}},components:{Ellipsis:r["a"]},data:function(){return{visible:!0}}},c=i,l=a("2877"),o=Object(l["a"])(c,n,s,!1,null,"d97fb474",null);e["a"]=o.exports},df73:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"table-page-search-wrapper"},[a("a-form",[a("a-row",{staticStyle:{height:"44px","margin-top":"7px"},attrs:{type:"flex",justify:"start"}},[a("a-form-item",{staticStyle:{"margin-right":"8px"}},[a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["queryAdType"],expression:"['queryAdType']"}],staticStyle:{width:"220px"},attrs:{mode:"multiple",placeholder:"Type",allowClear:"",maxTagCount:1},on:{change:t.handleChange}},[a("a-select-option",{attrs:{value:"2"}},[t._v("Reward Video")]),a("a-select-option",{attrs:{value:"3"}},[t._v("Interstitial")]),a("a-select-option",{attrs:{value:"1"}},[t._v("Native")]),a("a-select-option",{attrs:{value:"0"}},[t._v("Banner")])],1)],1),a("a-form-item",[a("span",{staticClass:"table-page-search-submitButtons"},[a("a-button",{attrs:{type:"primary",ghost:""},on:{click:function(e){return t.searchTable()}}},[t._v("Apply")])],1)]),a("a-form-item",{staticStyle:{position:"absolute",right:"16px"}},[a("span",{staticClass:"table-page-search-submitButtons"},[a("a-button",{directives:[{name:"action",rawName:"v-action:add",arg:"add"}],attrs:{type:"primary"},on:{click:function(e){return t.addPlacement()}}},[t._v("Add Placement")])],1)])],1)],1)],1),a("a-card",{staticClass:"ant-card-table-default",attrs:{bordered:!1}},[a("a-table",{ref:"table",attrs:{size:"default",rowKey:"id",columns:t.columns,dataSource:t.data,loading:t.loading,scroll:{y:t.scroll,x:1340},pagination:!1},on:{change:t.tableChange},scopedSlots:t._u([{key:"name",fn:function(t,e){return a("span",{},[a("om-placement-info",{attrs:{type:e.adType,status:e.status,name:e.name,id:e.id}})],1)}},{key:"adType",fn:function(e,n){return a("span",{},[a("a-tag",{style:0===n.status?"opacity: 0.3;":null},[t._v(t._s(t._f("typeFilter")(e)))])],1)}},{key:"scenes",fn:function(e,n){return a("span",{},[a("span",{style:0===n.status?"opacity: 0.3;":null},[t._v(t._s(1===n.adType||0===n.adType?"--":n.sceneSize||"0")+" ")])])}},{key:"sceneSize",fn:function(e,n){return a("span",{},[a("div",{style:0===n.status?"opacity: 0.3;":null},[a("div",{staticStyle:{"margin-top":"-4px"}},[t._v("Placement-level: "+t._s(0===n.frequencyCap&&0===n.frequencyInterval&&0===n.brandList.length&&0===n.modelList.length?"All":"Limited")),a("br")]),a("div",{staticStyle:{"margin-top":"8px"}},[t._v("Scene-level: "+t._s(n.scenes&&-1!==n.scenes.findIndex((function(t){return 0!==t.frequencyCap||0!==t.frequencyInterval}))?"Limited":"All"))])])])}},{key:"status",fn:function(e,n){return a("span",{},[a("span",[t.canEdit?a("span",[a("a",{on:{click:function(e){return t.handleUpdate(n)}}},[t._v("Edit")]),a("a-divider",{attrs:{type:"vertical"}}),a("a",{attrs:{herf:"#"},on:{click:function(e){return t.handleEdit(n)}}},[t._v(t._s(0===e?"Enable":"Disable"))])],1):a("span",[a("a",{on:{click:function(e){return t.viewPlacement(n)}}},[t._v("Details")])])])])}}])})],1)],1)},s=[],r=(a("4160"),a("a15b"),a("b0c0"),a("d3b7"),a("159b"),a("c1df")),i=a.n(r),c=a("2af9"),l=a("283f"),o=a("cda8"),d=a("5880"),u={0:{adType:0,text:"Banner"},1:{adType:0,text:"Native"},2:{adType:0,text:"Rewarded Video"},3:{adType:0,text:"Interstitial"}},p={name:"TableList",components:{Ellipsis:c["a"],OmPlacementInfo:o["a"]},created:function(){this.scroll=window.innerHeight-210,this.searchApp&&this.searchTable()},data:function(){return{data:[],scroll:200,queryParam:{},adType:[],sortOrder:"",loading:!1,canEdit:this.$auth("placement.edit"),columns:[{title:"Placement",dataIndex:"name",width:"300px",fixed:"left",sorter:this.buildSorter((function(t,e){return t.name.localeCompare(e.name)})),scopedSlots:{customRender:"name"}},{title:"Type",width:"12%",dataIndex:"adType",sorter:this.buildSorter((function(t,e){return t.typeStr.localeCompare(e.typeStr)})),scopedSlots:{customRender:"adType"}},{title:"Enable Scenes",width:"20%",align:"center",dataIndex:"scenes",scopedSlots:{customRender:"scenes"}},{title:"Traffic Control",dataIndex:"sceneSize",scopedSlots:{customRender:"sceneSize"}},{fixed:"right",width:"250px",title:"Operations",dataIndex:"status",scopedSlots:{customRender:"status"}}]}},computed:Object(d["mapState"])({visible:function(t){return t.publisher.searchAppVisible},searchApp:function(t){return t.publisher.searchApp}}),watch:{searchApp:function(t){this.searchTable()}},filters:{typeFilter:function(t){return u[t].text}},methods:{searchTable:function(){var t=this;this.loading=!0;var e={pubAppId:this.searchApp,placementTypes:this.adType};return Object(l["h"])(Object.assign(e,this.queryParam)).then((function(e){t.arraySort(e.data),e.data.forEach((function(t){t.typeStr=u[t.adType].text})),t.data=e.data})).finally((function(){t.loading=!1}))},handleChange:function(t){this.adType=t.join(",")},addPlacement:function(){this.$router.push({path:"/publisher/placement/add",query:{type:"Add"}})},handleEdit:function(t){var e=this,a=0===t.status?1:0;Object(l["l"])(Object.assign(t,{status:a})).then((function(n){0===n.code?(t.status=a,e.arraySort(e.data),e.$message.success("update success")):e.$message.error(n.msg)}))},handleUpdate:function(t){this.$router.push({path:"/publisher/placement/add",query:{placementId:t.id,type:"Edit"}})},viewPlacement:function(t){this.$router.push({path:"/publisher/placement/details",query:{placementId:t.id,type:"Details"}})},onSelectChange:function(t,e){this.selectedRowKeys=t,this.selectedRows=e},resetSearchForm:function(){this.queryParam={date:i()(new Date)}},tableChange:function(t,e,a){this.sortOrder=a.order},arraySort:function(t){t=t.sort((function(t,e){return t.status===e.status?e.createTime-t.createTime:e.status-t.status}))},buildSorter:function(t){var e=this;return function(a,n){var s=e.commonCompare(a,n);return 0!==s?s:t(a,n)}},commonCompare:function(t,e){return"ascend"===this.sortOrder?e.status-t.status:t.status-e.status}}},m=p,f=a("2877"),h=Object(f["a"])(m,n,s,!1,null,null,null);e["default"]=h.exports}}]);