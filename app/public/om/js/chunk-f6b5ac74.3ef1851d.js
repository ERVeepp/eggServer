(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-f6b5ac74"],{"1da1":function(t,e,a){"use strict";a.d(e,"a",(function(){return r}));a("d3b7"),a("e6cf");function n(t,e,a,n,r,i,p){try{var s=t[i](p),o=s.value}catch(l){return void a(l)}s.done?e(o):Promise.resolve(o).then(n,r)}function r(t){return function(){var e=this,a=arguments;return new Promise((function(r,i){var p=t.apply(e,a);function s(t){n(p,r,i,s,o,"next",t)}function o(t){n(p,r,i,s,o,"throw",t)}s(void 0)}))}}},"30c4":function(t,e,a){},"36c4":function(t,e,a){},"4df7":function(t,e,a){},7566:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("a-card",{style:t.style,attrs:{bordered:!1}},[a("a-steps",{staticClass:"steps",staticStyle:{"max-width":"900px","margin-top":"40px"},attrs:{current:t.currentTab}},[a("a-step",{attrs:{title:"App ID"}}),a("a-step",{attrs:{title:"App Name"}}),a("a-step",{attrs:{title:"Final Check"}})],1),a("div",{staticClass:"content"},[0===t.currentTab?a("step1",{on:{nextStep:t.nextStep,platInfo:t.platInfo,finalCheck:t.finalCheck}}):t._e(),1===t.currentTab?a("step2",{on:{nextStep:t.nextStep,prevStep:t.prevStep}}):t._e(),2===t.currentTab?a("step3",{on:{prevStep:t.prevStep,finish:t.finish}}):t._e()],1)],1)},r=[],i=(a("b64b"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("a-form",{staticStyle:{"margin-top":"84px","text-align":"center"},attrs:{form:t.form,hideRequiredMark:!0}},[a("om-form",{attrs:{showTip:!1,label:"Organization",field:"batchSize",tip:"Org.name"}},[a("OrgSelect",{attrs:{value:t.publisherId}})],1),a("om-form",{staticStyle:{"margin-top":"-12px"},attrs:{showTip:!0,label:"App ID / Store URL",field:"appId",tip:"App ID / Store URL"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["appId",{initialValue:t.appId||"",rules:[{validator:t.handleCheckAppId}]}],expression:"['appId', { initialValue: appId || '', rules: [{ validator: handleCheckAppId }] }]"}],attrs:{placeholder:"App ID / Store URL",autocomplete:"off",appId:t.appId}})],1)],1),a("div",{staticClass:"button-div"},[a("a-button",{staticStyle:{width:"168px"},attrs:{type:"primary",ghost:""},on:{click:t.search}},[t._v("Import Info From Store")]),a("a-button",{staticStyle:{"margin-left":"55px",width:"168px"},attrs:{type:"primary",ghost:""},on:{click:t.nextStep}},[t._v("Not Live in Store")])],1),a("a-spin",{staticStyle:{width:"100%",height:"80%"},attrs:{spinning:t.loading}})],1)}),p=[],s=(a("d3b7"),a("ac1f"),a("3ca3"),a("841c"),a("498a"),a("ddb0"),a("2b3d"),a("96cf"),a("1da1")),o=a("283f"),l=a("9c76"),c=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("a-form-item",[this.value?a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:[t.name,{initialValue:t.value,rules:[{required:!0,message:"Organization can not be empty."}]}],expression:"[name, {initialValue: value, rules: [{ required: true, message: 'Organization can not be empty.'}] }]"}],attrs:{placeholder:"Organization",size:"default",showArrow:!1}},t._l(t.pubList,(function(e){return a("a-select-option",{key:e.id,attrs:{title:e.name}},[a("ellipsis",{attrs:{length:25,tooltip:""}},[t._v(t._s(e.name))])],1)})),1):a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:[t.name,{rules:[{required:!0,message:"Organization can not be empty."}]}],expression:"[name, {rules: [{ required: true, message: 'Organization can not be empty.'}] }]"}],attrs:{placeholder:"Organization",size:"default",showArrow:!1}},t._l(t.pubList,(function(e){return a("a-select-option",{key:e.id,attrs:{title:e.name}},[a("ellipsis",{attrs:{length:25,tooltip:""}},[t._v(t._s(e.name))])],1)})),1)],1)},u=[],d=(a("a9e3"),a("2af9")),m=a("29e2"),h={name:"OmOrgSelect",components:{Ellipsis:d["a"]},created:function(){this.updateSelectList()},data:function(){return{pubList:[]}},props:{name:{type:String,default:"orgId"},value:{type:Number,default:null}},methods:{updateSelectList:function(){var t=this;Object(m["a"])({userId:this.$store.state.user.info.id}).then((function(e){0===e.code&&e.data.length&&(t.pubList=e.data)}))}}},f=h,v=a("2877"),g=Object(v["a"])(f,c,u,!1,null,"6e9a852a",null),b=g.exports,x={name:"Step1",components:{OmForm:l["a"],OrgSelect:b},data:function(){return{labelCol:{lg:{span:5},sm:{span:5}},wrapperCol:{lg:{span:19},sm:{span:19}},form:this.$form.createForm(this),appId:this.$parent.$parent.appId,publisherId:this.$parent.$parent.publisherId,showInfo:!0,loading:!1,plat:0}},methods:{nextStep:function(){var t=this,e=this.form.validateFields;e((function(e,a){e||(a.plat=t.plat,t.$parent.$parent.appInfo={},t.$emit("nextStep",a))}))},handleCheckAppId:function(t,e,a){if(e){var n=this.getAppId(e,a);n?a():a(new Error("App id is incorrect"))}else a(new Error("App Id format is incorrect"))},getAppId:function(t,e){var a=this;if(t=t.trim(),!isNaN(t))return a.plat=0,t;if(/^https?:/i.test(t)){var n=new URL(t);if(-1!==n.hostname.search(".google.com"))return a.plat=1,n.searchParams.get("id");var r=/id(\d+)/i.exec(n.pathname);if(r&&r.length>1)return a.plat=0,r[1]}return/^([a-zA-Z_][a-zA-Z0-9_]*)+([.][a-zA-Z_][a-zA-Z0-9_]*)+/.test(t)?(a.plat=1,t):null},search:function(){var t=this,e=this,a=this.form.validateFields;a(function(){var a=Object(s["a"])(regeneratorRuntime.mark((function a(n,r){var i,p;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(n){a.next=20;break}if(i=t.getAppId(r.appId),i){a.next=4;break}return a.abrupt("return",!1);case 4:return e.loading=!0,r.appId=i,a.prev=6,a.next=9,Object(o["m"])({appId:i});case 9:p=a.sent,e.loading=!1,0===p.code&&p.data?e.$emit("finalCheck",p.data):t.$message.error("App is not found in store"),a.next=18;break;case 14:a.prev=14,a.t0=a["catch"](6),e.loading=!1,t.$message.error("App is not found in store");case 18:a.next=20;break;case 20:case"end":return a.stop()}}),a,null,[[6,14]])})));return function(t,e){return a.apply(this,arguments)}}())}}},I=x,S=(a("b5f2"),Object(v["a"])(I,i,p,!1,null,"29dfd9a2",null)),y=S.exports,w=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("a-form",{staticStyle:{"margin-top":"84px","text-align":"center"},attrs:{form:t.form}},[a("om-form",{staticStyle:{"margin-bottom":"32px"},attrs:{showTip:!1,label:"App Name",field:"appName"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["appName",{initialValue:t.appName||"",rules:[{validator:t.handleCheckAppName}]}],expression:"['appName', { initialValue: appName || '', rules: [{validator: handleCheckAppName}] }]"}],attrs:{placeholder:"my appname",appName:t.appName}})],1),a("a-form-item",{attrs:{wrapperCol:{span:19,offset:4}}})],1),a("div",{staticClass:"button-div"},[a("a-button",{staticStyle:{width:"168px"},attrs:{type:"primary",ghost:""},on:{click:t.prevStep}},[t._v("Previous")]),a("a-button",{staticStyle:{"margin-left":"55px",width:"168px"},attrs:{type:"primary",loading:t.loading},on:{click:t.nextStep}},[t._v("Next")])],1)],1)},C=[],_={name:"Step2",components:{OmForm:l["a"]},data:function(){return{labelCol:{lg:{span:5},sm:{span:5}},wrapperCol:{lg:{span:19},sm:{span:19}},form:this.$form.createForm(this),loading:!1,appName:this.$parent.$parent.appName,plat:this.$parent.$parent.appInfo.plat,timer:0}},methods:{nextStep:function(){var t=this,e=this.form.validateFields;t.loading=!0,e((function(e,a){e?t.loading=!1:(t.loading=!1,t.$emit("nextStep",a))}))},prevStep:function(){this.$emit("prevStep")},handleCheckAppName:function(t,e,a){e?1===this.plat&&e.length>30?a(new Error("Android App Name max length limited to 30 characters")):0===this.plat&&e.length>50?a(new Error("iOS App Name max length limited to 50 characters")):a():a(new Error("App Name format is incorrect"))}},beforeDestroy:function(){clearTimeout(this.timer)}},A=_,k=(a("b080"),Object(v["a"])(A,w,C,!1,null,"babf9582",null)),N=k.exports,$=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"step3"},[a("a-form",{staticStyle:{"max-width":"500px",height:"500px",margin:"64px auto 0"},attrs:{form:t.form}},[a("om-app-info",{attrs:{icon:t.appInfo.icon,"app-name":t.appInfo.appName,"app-id":t.appInfo.appId,plat:t.appInfo.plat}}),a("a-form-item",[a("div",{staticClass:"coppa"},[a("div",{staticClass:"coppa-content"},[a("div",{staticClass:"coppa-title"},[t._v("COPPA Compliance")]),a("a-checkbox",{directives:[{name:"decorator",rawName:"v-decorator",value:["coppa",{initialValue:"",rules:[{validator:t.checkCoppa}]}],expression:"['coppa', { initialValue: '', rules: [ {validator: checkCoppa}] }]"}],staticClass:"coppa-checkbox",on:{change:t.onChange}}),a("div",{staticStyle:{display:"inline-flex"}},[a("span",{staticClass:"coppa-detail"},[t._v("By checking this box, I hereby represent and warrant that this app is not directed at users under the age of 13 and will at all times comply with AdTiming policies.")])])],1)])])],1),a("div",{staticClass:"button-div"},[a("a-button",{staticStyle:{width:"168px"},attrs:{type:"primary",ghost:""},on:{click:t.prevStep}},[t._v("Previous")]),a("a-button",{staticStyle:{"margin-left":"55px",width:"168px"},attrs:{type:"primary",loading:t.loading},on:{click:t.createApp}},[t._v("Add")])],1)],1)},O=[],T=a("00ce"),E={name:"Step3",components:{Result:d["c"],OmAppInfo:T["a"]},data:function(){return{form:this.$form.createForm(this),loading:!1,appInfo:this.$parent.$parent.appInfo}},methods:{finish:function(){this.$emit("finish")},prevStep:function(){this.$emit("prevStep")},toAppList:function(){this.$router.push("/publisher/apps")},createApp:function(){var t=this,e=this,a=this.form.validateFields;a((function(a,n){a||(e.loading=!0,Object(o["c"])(e.appInfo).then((function(a){0===a.code?(e.loading=!1,t.$router.push("/publisher/app/list"),t.$store.commit("UPDATESELECTLIST",(new Date).getTime())):(e.loading=!1,t.$message.error(a.msg))})))}))},checkCoppa:function(t,e,a){e?a():a(new Error("Must be checked."))},onChange:function(){}}},L=E,z=(a("9ccf"),Object(v["a"])(L,$,O,!1,null,"012e3b74",null)),F=z.exports,j={name:"CreateApp",components:{Step1:y,Step2:N,Step3:F},created:function(){this.style="height:"+(window.innerHeight-140)+"px"},data:function(){return{labelCol:{xs:{span:24},sm:{span:7}},wrapperCol:{xs:{span:24},sm:{span:13}},currentTab:0,params:{},publisherId:0,currentStep:0,style:"height:600px"}},methods:{nextStep:function(t){0===this.currentTab?(this.appId=t.appId,this.publisherId=t.orgId,this.appInfo||(this.appInfo={}),this.appInfo.appId=t.appId,this.appInfo.plat=t.plat,this.appInfo.publisherId=t.orgId):1===this.currentTab&&(this.appName=t.appName,this.appInfo.appName=t.appName),this.currentTab<2&&(this.currentTab+=1)},prevStep:function(){Object.keys(this.appInfo).length>5?this.currentTab=0:this.currentTab>0&&(this.currentTab-=1)},platInfo:function(t){this.appId=t.appId,this.plat=t.plat,this.appInfo||(this.appInfo={}),this.appInfo.plat=t.plat},finalCheck:function(t){this.appInfo=t,this.currentTab=2},finish:function(){this.currentTab=0}}},D=j,P=(a("acdf"),Object(v["a"])(D,n,r,!1,null,"79f1fd50",null));e["default"]=P.exports},9622:function(t,e,a){},"9c76":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("a-form-item",{staticStyle:{"margin-bottom":"20px"},attrs:{colon:!1,"label-col":t.labelCol,"wrapper-col":t.wrapperCol}},[a("span",{attrs:{slot:"label"},slot:"label"},[t.fill?a("img",{attrs:{src:"/assets/Vector.svg"}}):t._e(),t._v(" "+t._s(t.label)+" ")]),t._t("default",[t.fill?a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:[t.field,{rules:[{whitespace:!0,required:!0,message:t.label+" can not be empty."}]}],expression:"[field, { rules: [{ whitespace: true, required: true, message: label + ' can not be empty.'}] }]"}],attrs:{placeholder:t.hint,disabled:!t.canEdit,maxlength:t.maxlength}}):a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:[t.field],expression:"[field]"}],attrs:{disabled:!t.canEdit,placeholder:t.hint,maxlength:t.maxlength}})]),t.showTip?a("a-tooltip",{attrs:{placement:"right",mouseEnterDelay:.4,mouseLeaveDelay:.4}},[a("p",{attrs:{slot:"title"},domProps:{innerHTML:t._s(t.tip)},slot:"title"}),a("a",{staticClass:"tip",attrs:{href:"#"}},[a("a-icon",{attrs:{type:"exclamation-circle"}})],1)]):t._e()],2)},r=[],i=(a("a9e3"),{data:function(){return{labelCol:{lg:{span:8},sm:{span:8}},wrapperCol:{lg:{span:7},sm:{span:7}},canEdit:this.edit}},name:"OmForm",props:{label:{type:String,default:""},fill:{type:Boolean,default:!0},field:{type:String,default:""},tip:{type:String,default:""},showTip:{type:Boolean,default:!0},maxlength:{type:Number,default:1e3},edit:{type:Boolean,default:!0},hint:{type:String,default:""}},watch:{edit:function(t){this.canEdit=t}}}),p=i,s=(a("d81d7"),a("2877")),o=Object(s["a"])(p,n,r,!1,null,"1e293411",null);e["a"]=o.exports},"9ccf":function(t,e,a){"use strict";var n=a("d53c"),r=a.n(n);r.a},acdf:function(t,e,a){"use strict";var n=a("9622"),r=a.n(n);r.a},b080:function(t,e,a){"use strict";var n=a("30c4"),r=a.n(n);r.a},b5f2:function(t,e,a){"use strict";var n=a("4df7"),r=a.n(n);r.a},d53c:function(t,e,a){},d81d7:function(t,e,a){"use strict";var n=a("36c4"),r=a.n(n);r.a}}]);