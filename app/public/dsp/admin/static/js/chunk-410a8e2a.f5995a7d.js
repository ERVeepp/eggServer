(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-410a8e2a"],{"3fa5":function(e,t,a){"use strict";a.d(t,"a",(function(){return l}));var r=a("5c96");function l(e){Object(r["Notification"])({title:2e4===e.code?"success":"error",dangerouslyUseHTMLString:!0,message:e.info,type:2e4===e.code?"success":"error"})}},"7fa3":function(e,t,a){"use strict";var r=a("bc29"),l=a.n(r);l.a},bc29:function(e,t,a){},c12d:function(e,t,a){},cc5e:function(e,t,a){"use strict";a.d(t,"h",(function(){return l})),a.d(t,"g",(function(){return o})),a.d(t,"b",(function(){return n})),a.d(t,"i",(function(){return i})),a.d(t,"d",(function(){return s})),a.d(t,"f",(function(){return u})),a.d(t,"e",(function(){return c})),a.d(t,"a",(function(){return d})),a.d(t,"c",(function(){return p}));var r=a("b775");function l(){return Object(r["a"])({url:"/vue-element-admin/routes",method:"get"})}function o(){return Object(r["a"])({url:"/group/get-role-list",method:"get"})}function n(e){return Object(r["a"])({url:"/group/create-role",method:"post",data:e})}function i(e){return Object(r["a"])({url:"/group/edit-role-status",method:"post",data:e})}function s(e){return Object(r["a"])({url:"/group/del-role",method:"post",data:{id:e}})}function u(){return Object(r["a"])({url:"/permission/get-pms-list",method:"get"})}function c(e){return Object(r["a"])({url:"/role-permission/get-role-pms-list",method:"get",data:e})}function d(e){return Object(r["a"])({url:"/role-permission/add-role-pms",method:"post",data:e})}function p(e){return Object(r["a"])({url:"/role-permission/del-role-pms",method:"post",data:e})}},d408:function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-select",{staticClass:"role-select",attrs:{placeholder:"请选择role",disabled:e.disabled},on:{change:e.changeRole},model:{value:e.choiceRole,callback:function(t){e.choiceRole=t},expression:"choiceRole"}},e._l(e.rolesList,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1)},l=[],o=(a("96cf"),a("3b8d")),n=a("cc5e"),i={name:"ChoiceRole",props:{role:{type:String,default:""},disabled:{type:Boolean,default:!1}},data:function(){return{choiceRole:"",rolesList:[]}},watch:{role:{handler:function(e,t){this.choiceRole=e},immediate:!0}},mounted:function(){this.getRoles()},methods:{getRoles:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(n["g"])();case 2:t=e.sent,this.rolesList=t.data;case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),changeRole:function(){this.$emit("update:role",this.choiceRole)}}},s=i,u=(a("e553"),a("2877")),c=Object(u["a"])(s,r,l,!1,null,"55d64b78",null);t["a"]=c.exports},e382:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("el-dialog",{attrs:{visible:e.dialogVisible,title:"edit"===e.dialogType?"Edit Role":"New Role"},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-form",{ref:"ruleForm",attrs:{model:e.dialogData.data,rules:e.dialogData.rules,"label-width":"150px","label-position":"left"}},[a("el-form-item",{attrs:{label:"Email",prop:"email"}},[a("el-input",{attrs:{placeholder:"email"},model:{value:e.dialogData.data.email,callback:function(t){e.$set(e.dialogData.data,"email",t)},expression:"dialogData.data.email"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"Name",prop:"name"}},[a("el-input",{attrs:{placeholder:"name"},model:{value:e.dialogData.data.name,callback:function(t){e.$set(e.dialogData.data,"name",t)},expression:"dialogData.data.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"密码",prop:"password"}},[a("el-input",{attrs:{type:"password",autocomplete:"off"},model:{value:e.dialogData.data.password,callback:function(t){e.$set(e.dialogData.data,"password",t)},expression:"dialogData.data.password"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"确认密码",prop:"password_repeat"}},[a("el-input",{attrs:{type:"password",autocomplete:"off"},model:{value:e.dialogData.data.password_repeat,callback:function(t){e.$set(e.dialogData.data,"password_repeat",t)},expression:"dialogData.data.password_repeat"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"所属权限",prop:"role_id"}},[a("ChoiceRole",{attrs:{role:e.dialogData.data.role_id},on:{"update:role":function(t){return e.$set(e.dialogData.data,"role_id",t)}}})],1),e._v(" "),a("el-form-item",{attrs:{label:"Type",prop:"type"}},[a("el-select",{staticClass:"w100",attrs:{placeholder:"请选择type"},model:{value:e.dialogData.data.type,callback:function(t){e.$set(e.dialogData.data,"type",t)},expression:"dialogData.data.type"}},e._l(e.options.type,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"手续费比例",prop:"commission_rate"}},[a("el-input",{model:{value:e.dialogData.data.commission_rate,callback:function(t){e.$set(e.dialogData.data,"commission_rate",t)},expression:"dialogData.data.commission_rate"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"推荐人姓名",prop:"recommender"}},[a("el-input",{model:{value:e.dialogData.data.recommender,callback:function(t){e.$set(e.dialogData.data,"recommender",t)},expression:"dialogData.data.recommender"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"customer_type",prop:"customer_type"}},[a("el-select",{staticClass:"w100",attrs:{placeholder:"请选择customer_type"},model:{value:e.dialogData.data.customer_type,callback:function(t){e.$set(e.dialogData.data,"customer_type",t)},expression:"dialogData.data.customer_type"}},e._l(e.options.customer_type,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"是否可以上传HTML",prop:"html_right"}},[a("el-select",{staticClass:"w100",attrs:{placeholder:"请选择html_right"},model:{value:e.dialogData.data.html_right,callback:function(t){e.$set(e.dialogData.data,"html_right",t)},expression:"dialogData.data.html_right"}},e._l(e.options.html_right,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"批准状态",prop:"approval_status"}},[a("el-select",{staticClass:"w100",attrs:{placeholder:"请选择approval_status"},model:{value:e.dialogData.data.approval_status,callback:function(t){e.$set(e.dialogData.data,"approval_status",t)},expression:"dialogData.data.approval_status"}},e._l(e.options.approval_status,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"status",prop:"status"}},[a("el-select",{staticClass:"w100",attrs:{placeholder:"请选择status"},model:{value:e.dialogData.data.status,callback:function(t){e.$set(e.dialogData.data,"status",t)},expression:"dialogData.data.status"}},e._l(e.options.status,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"自动审核级别",prop:"auto_approval_level"}},[a("el-select",{staticClass:"w100",attrs:{placeholder:"请选择auto_approval_level"},model:{value:e.dialogData.data.auto_approval_level,callback:function(t){e.$set(e.dialogData.data,"auto_approval_level",t)},expression:"dialogData.data.auto_approval_level"}},e._l(e.options.auto_approval_level,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1),e._v(" "),a("div",{staticStyle:{"text-align":"right"}},[a("el-button",{attrs:{type:"danger"},on:{click:function(t){e.dialogVisible=!1}}},[e._v("Cancel")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.confirmFun("ruleForm")}}},[e._v("Confirm")])],1)],1),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.handleAddUser}},[e._v("New")]),e._v(" "),a("el-table",{staticStyle:{width:"100%","margin-top":"30px"},attrs:{data:e.userList,border:""}},[a("el-table-column",{attrs:{align:"center",label:"User Email"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.email)+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"User Name"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.name)+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"User Role"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e.roleMap.filter((function(e){return e.id==t.row.role_id}))[0].name)+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"User Status",width:"300"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-radio-group",{staticClass:"flex",on:{change:function(a){return e.handleEditStatus(t.row)}},model:{value:t.row.status,callback:function(a){e.$set(t.row,"status",a)},expression:"scope.row.status"}},[a("el-radio-button",{attrs:{label:"1"}},[e._v("active")]),e._v(" "),a("el-radio-button",{attrs:{label:"2"}},[e._v("paused")]),e._v(" "),a("el-radio-button",{attrs:{label:"3"}},[e._v("deleted")])],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"Operations"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(a){return e.handleEdit(t)}}},[e._v("Edit")])]}}])})],1)],1)},l=[],o=(a("96cf"),a("3b8d")),n=a("c24f"),i=a("d408"),s=a("3fa5"),u={0:"unknown",1:"submitted",2:"approved",3:"rejected"},c=[{id:1,name:"超管"},{id:2,name:"代理商"},{id:3,name:"admin-运营"},{id:4,name:"admin-财务"},{id:5,name:"代理商-运营"},{id:6,name:"代理商-财务"},{id:7,name:"代理商-ads"}],d={id:"",name:"",email:"",password:"",password_repeat:"",type:"1",phone:"",qq:"",skype:"",customer_type:"0",company_name:"",company_web_site:"",role_id:"",html_right:"0",pm_id:"",commission_rate:"0.2",approval_status:"1",approver_id:"",status:"1",recommender:"",auto_approval_level:"0"},p={components:{ChoiceRole:i["a"]},data:function(){var e=this,t=function(t,a,r){""===a?r(new Error("请输入密码")):(""!==e.dialogData.data.password_repeat&&e.$refs.ruleForm.validateField("password_repeat"),r())},a=function(t,a,r){""===a?r(new Error("请再次输入密码")):a!==e.dialogData.data.password?r(new Error("两次输入密码不一致!")):r()};return{statusMap:u,roleMap:c,options:{type:[{value:"1",label:"normal user"},{value:"2",label:"rented user"}],customer_type:[{value:"0",label:"unknown"},{value:"1",label:"company"},{value:"2",label:"person"}],html_right:[{value:"0",label:"没有权限"},{value:"1",label:"有权限"}],approval_status:[{value:"0",label:"unknown"},{value:"1",label:"submitted"},{value:"2",label:"approved"},{value:"3",label:"rejected"}],status:[{value:"0",label:"unknown"},{value:"1",label:"active"},{value:"2",label:"paused"},{value:"3",label:"deleted"}],auto_approval_level:[{value:"0",label:"unknown"},{value:"1",label:"A"},{value:"2",label:"B"},{value:"3",label:"C"}]},dialogVisible:!1,dialogType:"new",dialogData:{data:this._.cloneDeep(d),rules:{name:[{required:!0,message:"必填",trigger:"blur"}],email:[{required:!0,message:"必填",trigger:"blur"}],password:[{required:!0,message:"必填",trigger:"blur"},{validator:t,min:3}],password_repeat:[{required:!0,message:"必填",trigger:"blur"},{validator:a,min:3}],type:[{required:!0,message:"必填",trigger:"blur"}],role_id:[{required:!0,message:"必填",trigger:"blur"}],phone:[{required:!0,message:"必填",trigger:"blur"}],qq:[{required:!0,message:"必填",trigger:"blur"}],skype:[{required:!0,message:"必填",trigger:"blur"}],commission_rate:[],customer_type:[],company_web_site:[],html_right:[],approver_id:[],statue:[],recommender:[],auto_approval_level:[]}},userList:[]}},created:function(){this.getList()},methods:{getList:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(n["d"])();case 3:t=e.sent,this.userList=t.data,e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](0),console.error("error");case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));function t(){return e.apply(this,arguments)}return t}(),confirmFun:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return console.log("error submit!!"),!1;console.log("submit!"),t.submitFormFun()}))},submitFormFun:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,a,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t="edit"===this.dialogType,e.prev=1,!t){e.next=9;break}return e.next=5,Object(n["i"])(this.dialogData.data);case 5:a=e.sent,Object(s["a"])(a),e.next=13;break;case 9:return e.next=11,Object(n["a"])(this.dialogData.data);case 11:r=e.sent,Object(s["a"])(r);case 13:this.getList(),e.next=19;break;case 16:e.prev=16,e.t0=e["catch"](1),console.error("error");case 19:this.dialogVisible=!1;case 20:case"end":return e.stop()}}),e,this,[[1,16]])})));function t(){return e.apply(this,arguments)}return t}(),handleAddUser:function(){this.dialogType="new",this.dialogVisible=!0,this.dialogData.data=this._.cloneDeep(d)},handleEdit:function(e){this.dialogType="edit",this.dialogVisible=!0,this.dialogData.data=this._.cloneDeep(e.row),this.dialogData.data.password_repeat=this.dialogData.data.password},handleDelete:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){var a,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(n["b"])(t.row);case 2:a=e.sent,r=a.data,console.log(r),this.userList.splice(t.$index,1),Object(s["a"])(r);case 7:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),handleEditStatus:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(n["j"])({id:t.id,role_id:t.role_id,status:t.status});case 3:a=e.sent,Object(s["a"])(a),e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](0),console.error("error");case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));function t(t){return e.apply(this,arguments)}return t}()}},m=p,v=(a("7fa3"),a("2877")),b=Object(v["a"])(m,r,l,!1,null,"3ffb0366",null);t["default"]=b.exports},e553:function(e,t,a){"use strict";var r=a("c12d"),l=a.n(r);l.a}}]);